<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>43 - Generators</title>
    <link rel="stylesheet" href="../fundamentos/styles.css">
</head>
<body>
    <a href="../JavaScriptCami.html" class="back">‚Üê Volver al men√∫</a>
    <h1>43 - Generators (Generadores)</h1>
    
    <div class="code-section">
        <h2>üìå ¬øQu√© son los Generators?</h2>
        <p>Funciones especiales que pueden pausar su ejecuci√≥n y reanudarla. Se declaran con <code>function*</code> y usan <code>yield</code>.</p>
    </div>

    <h2>üíª Ejemplos Pr√°cticos</h2>
    <div id="ejemplos"></div>

    <script>
        let ejemploNumero = 0;
        const ejemplosContainer = document.getElementById('ejemplos');

        function iniciarEjemplo(titulo) {
            ejemploNumero++;
            const div = document.createElement('div');
            div.className = 'ejemplo-box';
            div.id = 'ejemplo-' + ejemploNumero;
            div.innerHTML = `<div class="ejemplo-header"><span class="ejemplo-numero">üìå EJEMPLO ${ejemploNumero}</span><span class="ejemplo-titulo">${titulo}</span></div><div class="ejemplo-contenido"></div>`;
            ejemplosContainer.appendChild(div);
        }

        function mostrarCodigo(codigo) {
            const ejemploActual = document.getElementById('ejemplo-' + ejemploNumero);
            if (ejemploActual) {
                const contenido = ejemploActual.querySelector('.ejemplo-contenido');
                const codigoDiv = document.createElement('div');
                codigoDiv.style.cssText = 'background: #282c34; color: #61dafb; padding: 12px; border-radius: 5px; font-family: Courier New; margin: 8px 0; border-left: 4px solid #f7df1e';
                codigoDiv.textContent = codigo;
                contenido.appendChild(codigoDiv);
            }
        }

        function mostrarResultado(texto) {
            const ejemploActual = document.getElementById('ejemplo-' + ejemploNumero);
            if (ejemploActual) {
                const contenido = ejemploActual.querySelector('.ejemplo-contenido');
                const linea = document.createElement('div');
                linea.style.cssText = 'color: #2ecc71; padding: 8px 15px; background: #e8f8f5; border-left: 4px solid #2ecc71; margin: 5px 0; border-radius: 3px; font-weight: 500; font-family: Courier New';
                linea.textContent = '‚ûú ' + texto;
                contenido.appendChild(linea);
            }
        }

        function mostrar(texto) {
            const ejemploActual = document.getElementById('ejemplo-' + ejemploNumero);
            if (ejemploActual) {
                const contenido = ejemploActual.querySelector('.ejemplo-contenido');
                const linea = document.createElement('div');
                linea.style.cssText = 'color: #666; padding: 5px 0';
                linea.textContent = texto;
                contenido.appendChild(linea);
            }
        }

        const style = document.createElement('style');
        style.textContent = `.ejemplo-box {background: white;border: 2px solid #f7df1e;border-radius: 8px;margin: 20px 0;overflow: hidden;box-shadow: 0 2px 8px rgba(0,0,0,0.1);}.ejemplo-header {background: linear-gradient(135deg, #f7df1e 0%, #e5ca00 100%);padding: 15px 20px;font-weight: bold;display: flex;align-items: center;gap: 15px;}.ejemplo-numero {background: #333;color: #f7df1e;padding: 5px 15px;border-radius: 20px;font-size: 0.9em;}.ejemplo-titulo {color: #333;font-size: 1.1em;}.ejemplo-contenido {padding: 20px;background: #f9f9f9;}`;
        document.head.appendChild(style);

        // EJEMPLO 1
        iniciarEjemplo("Generator b√°sico");
        mostrarCodigo('function* generador() {');
        mostrarCodigo('    yield 1;');
        mostrarCodigo('    yield 2;');
        mostrarCodigo('    yield 3;');
        mostrarCodigo('}');
        mostrarCodigo('const gen = generador();');
        function* generador() {
            yield 1;
            yield 2;
            yield 3;
        }
        const gen = generador();
        mostrarResultado(JSON.stringify(gen.next()));
        mostrarResultado(JSON.stringify(gen.next()));
        mostrarResultado(JSON.stringify(gen.next()));
        mostrarResultado(JSON.stringify(gen.next()));

        // EJEMPLO 2
        iniciarEjemplo("Generator con for...of");
        mostrarCodigo('function* numeros() {');
        mostrarCodigo('    yield 10;');
        mostrarCodigo('    yield 20;');
        mostrarCodigo('    yield 30;');
        mostrarCodigo('}');
        mostrarCodigo('for (const num of numeros()) {...}');
        function* numeros() {
            yield 10;
            yield 20;
            yield 30;
        }
        for (const num of numeros()) {
            mostrarResultado('N√∫mero: ' + num);
        }

        // EJEMPLO 3
        iniciarEjemplo("Generator infinito");
        mostrarCodigo('function* contador() {');
        mostrarCodigo('    let n = 0;');
        mostrarCodigo('    while(true) {');
        mostrarCodigo('        yield n++;');
        mostrarCodigo('    }');
        mostrarCodigo('}');
        function* contador() {
            let n = 0;
            while(true) {
                yield n++;
            }
        }
        const cont = contador();
        mostrarResultado('Valor 1: ' + cont.next().value);
        mostrarResultado('Valor 2: ' + cont.next().value);
        mostrarResultado('Valor 3: ' + cont.next().value);

        // EJEMPLO 4
        iniciarEjemplo("Pasar valores con next()");
        mostrarCodigo('function* generador() {');
        mostrarCodigo('    const x = yield "Dame un valor";');
        mostrarCodigo('    yield x * 2;');
        mostrarCodigo('}');
        function* generadorValor() {
            const x = yield "Dame un valor";
            yield x * 2;
        }
        const g = generadorValor();
        mostrarResultado(g.next().value);
        mostrarResultado(g.next(5).value);

        // EJEMPLO 5
        iniciarEjemplo("yield* - Delegar a otro generator");
        mostrarCodigo('function* gen1() { yield 1; yield 2; }');
        mostrarCodigo('function* gen2() {');
        mostrarCodigo('    yield* gen1();');
        mostrarCodigo('    yield 3;');
        mostrarCodigo('}');
        function* gen1() { yield 1; yield 2; }
        function* gen2() {
            yield* gen1();
            yield 3;
        }
        mostrarResultado('Valores: ' + [...gen2()]);

        // EJEMPLO 6
        iniciarEjemplo("Caso pr√°ctico - Paginaci√≥n");
        mostrarCodigo('function* paginador(items, porPagina) {');
        mostrarCodigo('    for(let i=0; i<items.length; i+=porPagina) {');
        mostrarCodigo('        yield items.slice(i, i + porPagina);');
        mostrarCodigo('    }');
        mostrarCodigo('}');
        function* paginador(items, porPagina) {
            for(let i=0; i<items.length; i+=porPagina) {
                yield items.slice(i, i + porPagina);
            }
        }
        const datos = [1,2,3,4,5,6,7,8,9];
        let pagina = 1;
        for (const grupo of paginador(datos, 3)) {
            mostrarResultado('P√°gina ' + pagina++ + ': ' + grupo);
        }
    </script>

    <div class="code-section">
        <h2>üìã M√©todos del Generator</h2>
        <ul>
            <li><code>next(valor)</code> - Contin√∫a ejecuci√≥n</li>
            <li><code>return(valor)</code> - Termina el generator</li>
            <li><code>throw(error)</code> - Lanza error en el generator</li>
        </ul>
    </div>

    <div class="code-section">
        <h2>‚úÖ Casos de uso</h2>
        <ul>
            <li>‚úÖ Secuencias infinitas</li>
            <li>‚úÖ Iteraci√≥n perezosa (lazy)</li>
            <li>‚úÖ Flujo de control personalizado</li>
            <li>‚úÖ Paginaci√≥n de datos</li>
        </ul>
    </div>
</body>
</html>
